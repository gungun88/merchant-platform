const { createClient } = require('@supabase/supabase-js'); const fs = require('fs'); const path = require('path'); function loadEnv() { const envPath = path.join(__dirname, '..', '.env.local'); const envContent = fs.readFileSync(envPath, 'utf8'); const env = {}; envContent.split('\n').forEach(line => { const [key, ...values] = line.split('='); if (key && values.length > 0) { env[key.trim()] = values.join('=').trim(); } }); return env; } async function checkProfilesStructure() { const env = loadEnv(); const supabase = createClient(env.NEXT_PUBLIC_SUPABASE_URL, env.SUPABASE_SERVICE_ROLE_KEY, { auth: { autoRefreshToken: false, persistSession: false } }); console.log('ðŸ” æ£€æŸ¥ profiles è¡¨ç»“æž„...\n'); const { data: profiles, error } = await supabase.from('profiles').select('*').limit(1); if (error) { console.error('âŒ é”™è¯¯:', error); return; } if (profiles && profiles.length > 0) { console.log('âœ… profiles è¡¨å­—æ®µ:'); Object.keys(profiles[0]).forEach(field => { console.log(); }); } } checkProfilesStructure();
