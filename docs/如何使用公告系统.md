# 如何在前端展示公告

公告管理系统已经开发完成，现在您可以在任何页面添加公告展示。

## 快速使用

### 1. 在首页添加公告

在 `app/page.tsx` 文件中，找到第 311 行的 `{/* Announcement Carousel */}` 注释，

将下面的旧代码（约第312-347行）：
```tsx
<Card className="p-2 mb-4 bg-gradient-to-r from-blue-50 to-indigo-50">
  <div className="flex items-center justify-between gap-2">
    ...旧的公告轮播代码...
  </div>
</Card>
```

替换为：
```tsx
{/* 公告展示 - 使用数据库公告 */}
<AnnouncementBanner targetAudience="all" maxDisplay={3} className="mb-4" />
```

### 2. 在其他页面使用

在任何页面添加公告很简单：

```tsx
import { AnnouncementBanner } from "@/components/announcement-banner"

export default function YourPage() {
  return (
    <div>
      {/* 在页面顶部添加公告 */}
      <AnnouncementBanner
        targetAudience="all"     // 可选: "all", "users", "merchants", "partners"
        maxDisplay={3}           // 最多显示3条公告
        className="mb-6"         // 自定义样式
      />

      {/* 其他内容 */}
    </div>
  )
}
```

## AnnouncementBanner 组件参数

| 参数 | 类型 | 默认值 | 说明 |
|------|------|--------|------|
| `targetAudience` | `"all"` \| `"users"` \| `"merchants"` \| `"partners"` | `"all"` | 显示哪些用户群体的公告 |
| `maxDisplay` | `number` | `3` | 最多显示多少条公告 |
| `className` | `string` | `""` | 自定义 CSS 类名 |

## 功能特性

1. **自动加载**：从数据库加载激活的公告
2. **可关闭**：用户可以关闭不想看的公告（使用 localStorage 记录）
3. **点击查看详情**：点击公告可以查看完整内容
4. **自动统计**：自动统计点击次数
5. **时间过滤**：自动过滤未到开始时间或已过结束时间的公告
6. **优先级排序**：根据置顶状态和优先级自动排序
7. **美观UI**：不同类型公告有不同的颜色和图标

## 使用示例

### 示例 1：首页展示所有人的公告
```tsx
<AnnouncementBanner targetAudience="all" maxDisplay={5} />
```

### 示例 2：商家后台展示商家专属公告
```tsx
<AnnouncementBanner targetAudience="merchants" maxDisplay={3} />
```

### 示例 3：合作伙伴页面展示合作伙伴公告
```tsx
<AnnouncementBanner targetAudience="partners" maxDisplay={2} />
```

## 管理公告

管理员可以通过以下方式管理公告：

1. 访问管理后台：http://localhost:3000/admin/announcements
2. 点击"创建公告"按钮
3. 填写公告信息：
   - **标题**：公告标题
   - **内容**：公告详细内容
   - **类型**：信息、警告、成功、错误、更新
   - **目标受众**：所有人、普通用户、商家、合作伙伴
   - **优先级**：0-10，数字越大优先级越高
   - **开始/结束时间**：可选，控制公告显示时间
   - **激活状态**：是否立即激活
   - **置顶状态**：是否置顶显示

## 注意事项

1. 首页目前使用硬编码的公告数据，需要手动替换成 `AnnouncementBanner` 组件
2. 确保已经运行数据库迁移脚本：`node scripts/run_announcements_migration.js`
3. 或者在 Supabase SQL Editor 中手动执行 `scripts/044_create_announcements_table.sql`
